import{r as a}from"./vendor-ui-Cj-e85pn.js";import{F as f}from"./index-CcjVERrS.js";import{d as p}from"./mockDataService-DJyhFZ5B.js";function S(e){const[u,l]=a.useState([]),[d,o]=a.useState(!0),[T,n]=a.useState(null);a.useEffect(()=>{s()},[JSON.stringify(e)]);const s=async()=>{try{o(!0);let t=[];e?.driverId?t=(await f.getDriverTrips()).trips||[]:t=(await p.searchTrips({fromDate:e?.fromDate})).trips||[],e?.status&&e.status.length>0&&(t=t.filter(r=>e.status?.includes(r.status))),e?.fromDate&&(t=t.filter(r=>r.departure_date>=e.fromDate)),l(t),n(null)}catch(t){console.error("Error fetching trips:",t),n(t.message)}finally{o(!1)}};return{trips:u,loading:d,error:T,refresh:s,createTrip:async t=>{try{const r=await p.createTrip(t);return await s(),{data:r.trip,error:null}}catch(r){return console.error("Error creating trip:",r),{data:null,error:r.message}}},updateTrip:async(t,r)=>{try{const c=await p.updateTrip(t,r);return await s(),{data:c.trip,error:null}}catch(c){return console.error("Error updating trip:",c),{data:null,error:c.message}}},deleteTrip:async t=>{try{return await p.deleteTrip(t),await s(),{error:null}}catch(r){return console.error("Error deleting trip:",r),{error:r.message}}},publishTrip:async t=>{try{const r=await f.updateTrip(t,{status:"published"});return await s(),{data:r.trip,error:null}}catch(r){return console.error("Error publishing trip:",r),{error:r.message}}}}}function D(e){const[u,l]=a.useState([]),[d,o]=a.useState(!1),[T,n]=a.useState(null);return{trips:u,loading:d,error:T,searchTrips:async()=>{try{o(!0);const i=await p.searchTrips({from:e.from,to:e.to,date:e.departureDate,seats:e.seats});l(i.trips||[]),n(null)}catch(i){console.error("Error searching trips:",i),n(i.message)}finally{o(!1)}}}}export{D as a,S as u};
