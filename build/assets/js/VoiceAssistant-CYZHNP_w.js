import{r as o,j as e}from"./vendor-ui-S1-b02vM.js";import{c as m,n as S,m as c,B as N,A as I,t as M}from"./index-C4myuZdd.js";import"./vendor-react-7PqXWhc5.js";import"./vendor-utils-Drrw94dm.js";import"./vendor-supabase-DCWnlmhc.js";import"./vendor-animation-BozBRtxF.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],L=m("mic-off",A);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],x=m("mic",_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],z=m("volume-2",R);function B(){const{language:r}=S(),[n,d]=o.useState(!1),[f,h]=o.useState(!1),[l,y]=o.useState(""),[g,k]=o.useState(!1),i=o.useRef(null);o.useEffect(()=>{const a=window.SpeechRecognition||window.webkitSpeechRecognition;a&&(k(!0),i.current=new a,i.current.continuous=!1,i.current.interimResults=!0,i.current.lang=r==="ar"?"ar-AE":"en-US",i.current.onresult=t=>{const p=t.resultIndex,u=t.results[p][0].transcript;y(u),t.results[p].isFinal&&j(u)},i.current.onerror=t=>{console.error("Speech recognition error:",t.error),d(!1),t.error==="no-speech"&&s(r==="ar"?"لم أسمع شيئاً، حاول مرة أخرى":"I didn't hear anything, please try again")},i.current.onend=()=>{d(!1)})},[r]);const w=[{command:"book_ride",action:()=>{s(r==="ar"?"حسناً، دعني أساعدك في حجز رحلة":"Sure, let me help you book a ride")},patterns:[/book.*ride/i,/need.*ride/i,/take.*me/i,/احجز.*رحلة/i,/أريد.*رحلة/i]},{command:"check_status",action:()=>{s(r==="ar"?"دعني أتحقق من حالة رحلتك":"Let me check your trip status")},patterns:[/where.*driver/i,/trip.*status/i,/check.*status/i,/أين.*السائق/i,/حالة.*الرحلة/i]},{command:"emergency",action:()=>{s(r==="ar"?"تفعيل الطوارئ، الاتصال بالدعم":"Activating emergency, contacting support")},patterns:[/help/i,/emergency/i,/sos/i,/مساعدة/i,/طوارئ/i]},{command:"cancel_trip",action:()=>{s(r==="ar"?"هل أنت متأكد من إلغاء الرحلة؟":"Are you sure you want to cancel the trip?")},patterns:[/cancel/i,/stop/i,/إلغاء/i,/توقف/i]}],b=()=>{if(!g){M.error("Voice recognition is not supported in your browser");return}d(!0),y(""),i.current?.start(),s(r==="ar"?"نعم، أنا أستمع":"Yes, I'm listening")},v=()=>{d(!1),i.current?.stop()},s=a=>{if("speechSynthesis"in window){h(!0);const t=new SpeechSynthesisUtterance(a);t.lang=r==="ar"?"ar-AE":"en-US",t.rate=.9,t.pitch=1,t.onend=()=>{h(!1)},window.speechSynthesis.speak(t)}},j=a=>{const t=w.find(p=>p.patterns.some(u=>u.test(a)));t?t.action():s(r==="ar"?'عذراً، لم أفهم الأمر. حاول قول "احجز رحلة" أو "أين السائق"':`Sorry, I didn't understand. Try saying "book a ride" or "where is my driver"`)};return g?e.jsxs(e.Fragment,{children:[e.jsxs(c.div,{initial:{scale:0},animate:{scale:1},className:"fixed bottom-24 left-6 z-40",children:[e.jsx(N,{onClick:n?v:b,size:"lg",className:`
            w-16 h-16 rounded-full shadow-2xl
            ${n?"bg-red-600 hover:bg-red-700":"bg-gradient-to-br from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700"}
          `,children:e.jsx(c.div,{animate:n?{scale:[1,1.2,1]}:{},transition:{duration:1,repeat:1/0},children:n?e.jsx(L,{className:"w-7 h-7"}):e.jsx(x,{className:"w-7 h-7"})})}),n&&e.jsx(c.div,{animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:1.5,repeat:1/0},className:"absolute inset-0 bg-red-600 rounded-full -z-10"})]}),e.jsx(I,{children:(n||l)&&e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-44 left-6 z-40 max-w-xs",children:e.jsxs("div",{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-2xl shadow-2xl p-4 border border-gray-200/50 dark:border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(c.div,{animate:{opacity:[1,.3,1]},transition:{duration:1,repeat:1/0},children:f?e.jsx(z,{className:"w-5 h-5 text-indigo-600"}):e.jsx(x,{className:"w-5 h-5 text-indigo-600"})}),e.jsx("span",{className:"text-sm font-semibold",children:n?r==="ar"?"أستمع...":"Listening...":r==="ar"?"أتحدث...":"Speaking..."})]}),l&&e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:['"',l,'"']}),!l&&n&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r==="ar"?'قل شيئاً مثل "احجز رحلة" أو "أين السائق"':'Say something like "book a ride" or "where is my driver"'})]})})})]}):null}export{B as VoiceAssistant};
