import{r as g,j as e}from"./vendor-ui-S1-b02vM.js";import{T as M,a as C,b as f,c as p}from"./tabs-B9Xs08FN.js";import{PackageDelivery as P}from"./PackageDelivery-3jNL1jY6.js";import{FindRide as T}from"./FindRide-Dj0T_7Vv.js";import{O as D}from"./OfferRide-D9KUq6lo.js";import{c as O,C as F,b as J,d as K,e as _,f as R,B as j,h as N,A as I,m as y,P as L,S as $,F as B}from"./index-C4myuZdd.js";import{S as v}from"./switch-d-2WclGi.js";import{L as w}from"./label-BRQac6GQ.js";import{S as E}from"./serviceFactory-BhemUNoC.js";import{M as z,N as k}from"./useTrips-BBJaC5In.js";import{Z as S}from"./zap-aZRjv3J1.js";import{U as A}from"./user-plus-DBHyUMjB.js";import{T as H}from"./thermometer-sun-Doqsn75-.js";import{L as U}from"./leaf-DNscW6R4.js";import{C as W}from"./car-B3BmIsNb.js";import{B as q}from"./bike-Da2nunz2.js";import{S as V}from"./search-Da8amzCi.js";import{U as Z}from"./users-BYsldg1t.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Q=O("chevron-right",G);class X{async planJourney(l,a,t={}){console.log("Planning Intermodal Journey...",{from:l,to:a,preferences:t});const c=await E.discover("carpool",{from:l.address,to:a.address,isFemaleOnly:t.femaleOnly}),r=[];if(c.success&&c.data)for(const n of c.data){const m=await this.buildJourneyWithTrip(l,a,n,t);m&&r.push(m)}const i=this.calculateDistance(l,a);if(i<5){const n=await this.buildScooterOnlyJourney(l,a,i);n&&r.push(n)}return r.sort((n,m)=>m.comfortScore-n.comfortScore)}async buildJourneyWithTrip(l,a,t,c){const r=[],i={lat:t.from_lat,lng:t.from_lng},n=this.calculateDistance(l,i);n>.3?r.push({type:"scooter",from:l,to:i,distanceKm:n,durationMinutes:Math.ceil(n*4)}):r.push({type:"walk",from:l,to:i,distanceKm:n,durationMinutes:Math.ceil(n*12)}),r.push({type:"carpool",from:i,to:{lat:t.to_lat,lng:t.to_lng},distanceKm:this.calculateDistance(i,{lat:t.to_lat,lng:t.to_lng}),durationMinutes:30,data:t,isFemaleOnly:t.is_female_only});const m={lat:t.to_lat,lng:t.to_lng},h=this.calculateDistance(m,a);h>.1&&r.push({type:"walk",from:m,to:a,distanceKm:h,durationMinutes:Math.ceil(h*12)});const s=r.reduce((u,b)=>u+b.distanceKm,0),o=r.reduce((u,b)=>u+b.durationMinutes,0),x=this.calculateComfortScore(r);return{id:Math.random().toString(36).substr(2,9),segments:r,totalPrice:(t.price_per_seat||10)+(n>.3?5:0),totalDurationMinutes:o,totalDistanceKm:s,co2SavedKg:s*.1,comfortScore:x}}async buildScooterOnlyJourney(l,a,t){return{id:"scooter-only",segments:[{type:"scooter",from:l,to:a,distanceKm:t,durationMinutes:Math.ceil(t*4)}],totalPrice:5+t*1.5,totalDurationMinutes:Math.ceil(t*4),totalDistanceKm:t,co2SavedKg:t*.12,comfortScore:8}}calculateComfortScore(l){let a=10;const t=new Date().getHours(),c=t>=10&&t<=16;for(const r of l)r.type==="walk"&&(r.distanceKm>.5&&(a-=3),c&&r.distanceKm>.2&&(a-=4));return Math.max(0,a)}calculateDistance(l,a){const c=(a.lat-l.lat)*Math.PI/180,r=(a.lng-l.lng)*Math.PI/180,i=Math.sin(c/2)*Math.sin(c/2)+Math.cos(l.lat*Math.PI/180)*Math.cos(a.lat*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}}const Y=new X;function ee(){const[d,l]=g.useState(!1),[a,t]=g.useState([]),[c,r]=g.useState(null),[i,n]=g.useState({femaleOnly:!1,comfortFirst:!0,prayerTimeStop:!1}),m=async()=>{l(!0);try{const s={lat:25.19,lng:55.19,address:"Dubai Marina"},o={lat:25.41,lng:55.41,address:"Sharjah City Center"},x=await Y.planJourney(s,o,{femaleOnly:i.femaleOnly});t(x)}catch(s){console.error(s)}finally{l(!1)}},h=s=>{switch(s){case"scooter":return e.jsx(q,{className:"w-4 h-4"});case"carpool":return e.jsx(W,{className:"w-4 h-4"});default:return e.jsx(k,{className:"w-4 h-4"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-md dark:bg-slate-900/80",children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(K,{className:"text-xl md:text-2xl font-black text-teal-700 dark:text-teal-400",children:"Intermodal Journey Planner"}),e.jsx(_,{className:"text-xs md:text-sm",children:"Multi-leg routes designed for the Middle East climate & culture"})]}),e.jsx(S,{className:"w-6 h-6 md:w-8 md:h-8 text-teal-500 animate-pulse flex-shrink-0"})]})}),e.jsx(R,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-teal-50 dark:bg-teal-950/20 border border-teal-100 dark:border-teal-900",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(w,{className:"flex items-center gap-2 text-sm md:text-base",children:[e.jsx(A,{className:"w-4 h-4 text-pink-500"}),"Gender Privacy"]}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Female-only carpool matches"})]}),e.jsx(v,{checked:i.femaleOnly,onCheckedChange:s=>n(o=>({...o,femaleOnly:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-orange-50 dark:bg-orange-950/20 border border-orange-100 dark:border-orange-900",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(w,{className:"flex items-center gap-2 text-sm md:text-base",children:[e.jsx(H,{className:"w-4 h-4 text-orange-500"}),"Beat the Heat"]}),e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Minimize walking in peak sun"})]}),e.jsx(v,{checked:i.comfortFirst,onCheckedChange:s=>n(o=>({...o,comfortFirst:s}))})]}),e.jsx(j,{size:"lg",className:"rounded-2xl bg-teal-600 hover:bg-teal-700 text-white font-bold h-12 md:h-full",onClick:m,disabled:d,children:d?"Analyzing Routes...":"Plan Smart Journey"})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:["Suggested Smart Routes",a.length>0&&e.jsx(N,{variant:"outline",children:a.length})]}),e.jsx(I,{children:a.map((s,o)=>e.jsxs(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.1},onClick:()=>r(s),className:`cursor-pointer group relative overflow-hidden rounded-2xl border-2 transition-all p-5 ${c?.id===s.id?"border-teal-500 bg-teal-50/50 dark:bg-teal-950/30":"border-slate-100 hover:border-teal-300 dark:border-slate-800"}`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between mb-4 gap-4",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2 md:gap-3",children:s.segments.map((x,u)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 md:p-2 rounded-lg ${x.type==="scooter"?"bg-green-100 text-green-700":x.type==="carpool"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:h(x.type)}),u<s.segments.length-1&&e.jsx(Q,{className:"w-3 h-3 md:w-4 md:h-4 text-slate-300"})]},u))}),e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsxs("div",{className:"text-xl md:text-2xl font-black text-teal-600",children:["AED ",s.totalPrice]}),e.jsxs("div",{className:"text-[10px] md:text-xs text-muted-foreground",children:[s.totalDurationMinutes," mins • ",s.totalDistanceKm.toFixed(1)," km"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs font-bold uppercase tracking-wider text-muted-foreground",children:[e.jsx("span",{children:"Comfort Score"}),e.jsxs("span",{className:s.comfortScore>7?"text-emerald-500":"text-orange-500",children:[s.comfortScore,"/10"]})]}),e.jsx(L,{value:s.comfortScore*10,className:`h-1.5 ${s.comfortScore>7?"bg-emerald-100":"bg-orange-100"}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-emerald-500"}),e.jsxs("span",{className:"text-xs font-bold text-emerald-600",children:["-",s.co2SavedKg,"kg CO₂"]})]})]})]},s.id))})]}),e.jsx("div",{className:"space-y-6",children:c?e.jsx(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:e.jsxs(se,{className:"overflow-hidden border-0 shadow-2xl",children:[e.jsx(z,{height:"300px",className:"rounded-b-none",locations:c.segments.flatMap(s=>[{lat:s.from.lat,lng:s.from.lng,label:`${s.type} start`,type:s.type},{lat:s.to.lat,lng:s.to.lng,label:`${s.type} end`,type:s.type}]),showRoute:!0}),e.jsxs(te,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between bg-teal-50 dark:bg-teal-950/30 p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{className:"w-6 h-6 text-teal-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-teal-900 dark:text-teal-400",children:"Total Journey Confidence"}),e.jsx("p",{className:"text-xs text-teal-700/70",children:"Wassel Verified Providers Only"})]})]}),e.jsx(j,{size:"sm",className:"bg-teal-600",children:"Book All"})]}),e.jsx("div",{className:"relative pl-6 space-y-8 before:absolute before:left-[11px] before:top-2 before:bottom-2 before:w-0.5 before:bg-slate-200 dark:before:bg-slate-800",children:c.segments.map((s,o)=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`absolute -left-7 w-4 h-4 rounded-full border-2 border-white dark:border-slate-900 z-10 ${s.type==="scooter"?"bg-green-500":s.type==="carpool"?"bg-blue-500":"bg-slate-400"}`}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-black capitalize flex items-center gap-2",children:[h(s.type),s.type," Segment"]}),e.jsxs("span",{className:"text-xs font-bold text-muted-foreground",children:[s.durationMinutes," mins"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.from.address," → ",s.to.address]}),s.isFemaleOnly&&e.jsx(N,{variant:"outline",className:"w-fit text-pink-600 bg-pink-50 border-pink-200 text-[10px] mt-1",children:"Exclusive: Female Only"})]})]},o))})]})]})}):e.jsxs("div",{className:"h-full min-h-[400px] flex flex-col items-center justify-center border-2 border-dashed border-slate-200 dark:border-slate-800 rounded-3xl text-muted-foreground p-8 text-center bg-slate-50/50 dark:bg-slate-950/20",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-slate-100 flex items-center justify-center mb-4",children:e.jsx(k,{className:"w-10 h-10 opacity-20"})}),e.jsx("h3",{className:"text-lg font-bold",children:"Select a journey to view details"}),e.jsx("p",{className:"text-sm max-w-[250px] mx-auto",children:"We'll show you the exact route, transfer points, and comfort metrics."})]})})]})]})}function se({children:d,className:l,...a}){return e.jsx("div",{className:`bg-white dark:bg-slate-900 rounded-3xl shadow-xl overflow-hidden ${l}`,...a,children:d})}function te({children:d,className:l,...a}){return e.jsx("div",{className:`p-6 ${l}`,...a,children:d})}function ye({mainService:d,mainServiceTitle:l,mainServiceIcon:a,showAllTabs:t=!0}){return t?e.jsx("div",{className:"w-full",children:e.jsxs(M,{defaultValue:"main",className:"w-full",children:[e.jsxs(C,{className:"grid w-full grid-cols-5 mb-6 h-14",children:[e.jsxs(f,{value:"main",className:"flex items-center gap-2 text-sm md:text-base",children:[a,e.jsx("span",{className:"hidden sm:inline",children:l})]}),e.jsxs(f,{value:"smart",className:"flex items-center gap-2 text-sm md:text-base",children:[e.jsx(S,{className:"w-4 h-4 text-teal-500"}),e.jsx("span",{className:"hidden sm:inline",children:"Smart Route"})]}),e.jsxs(f,{value:"package",className:"flex items-center gap-2 text-sm md:text-base",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Package"})]}),e.jsxs(f,{value:"find",className:"flex items-center gap-2 text-sm md:text-base",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Find Ride"})]}),e.jsxs(f,{value:"share",className:"flex items-center gap-2 text-sm md:text-base",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Share Ride"})]})]}),e.jsx(p,{value:"main",className:"mt-0",children:d}),e.jsx(p,{value:"smart",className:"mt-0",children:e.jsx(ee,{})}),e.jsx(p,{value:"package",className:"mt-0",children:e.jsx(P,{})}),e.jsx(p,{value:"find",className:"mt-0",children:e.jsx(T,{})}),e.jsx(p,{value:"share",className:"mt-0",children:e.jsx(D,{})})]})}):e.jsx(e.Fragment,{children:d})}export{ye as S};
