import{j as e,e as _,V as y,C as w,f as C,g as k,r as M}from"./vendor-ui-jVyU-rC5.js";import{c as z,j as h,k as S,f as A,B as o,C as B,l as T,g as $}from"./index-DyAvE2yn.js";import{B as p}from"./bell-BeSEUIbN.js";import{C as q}from"./clock-hvicMn7c.js";import{T as D}from"./triangle-alert-BAyRqiej.js";import{C as R}from"./circle-check-big-BBEU2Lus.js";import{S as I}from"./star-BDmFgUbN.js";import{M as E}from"./message-square-BTpfBS6B.js";import{C as H}from"./car-SP4ZtNys.js";import"./vendor-react-7PqXWhc5.js";import"./vendor-utils-CADQ8aCF.js";import"./vendor-supabase-b92lme3K.js";import"./vendor-animation-BozBRtxF.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],V=z("bell-off",L);function Y({className:a,children:r,...t}){return e.jsxs(_,{"data-slot":"scroll-area",className:h("relative",a),...t,children:[e.jsx(y,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:r}),e.jsx(F,{}),e.jsx(w,{})]})}function F({className:a,orientation:r="vertical",...t}){return e.jsx(C,{"data-slot":"scroll-area-scrollbar",orientation:r,className:h("flex touch-none p-px transition-colors select-none",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",a),...t,children:e.jsx(k,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function ae(){const{notifications:a,unreadCount:r,markAsRead:t,loading:j}=S(),[c,d]=M.useState("all"),g=s=>{switch(s){case"trip_request":case"booking_request":case"trip_accepted":case"booking_accepted":case"trip_rejected":case"trip_cancelled":case"driver_arrived":case"trip_started":case"trip_completed":return H;case"message":case"new_message":return E;case"payment_received":case"payment_sent":case"wallet_topup":return $;case"rating_reminder":return I;case"verification_approved":case"verification_rejected":return R;case"safety_alert":return D;default:return p}},v=s=>{switch(s){case"trip_accepted":case"booking_accepted":case"verification_approved":case"payment_received":case"wallet_topup":return"text-green-600";case"trip_rejected":case"trip_cancelled":case"verification_rejected":return"text-red-600";case"safety_alert":return"text-amber-600";default:return"text-primary"}},m=c==="unread"?a.filter(s=>!s.read):a,N=async s=>{await t(s)},b=s=>{const l=new Date(s),i=new Date().getTime()-l.getTime(),n=Math.floor(i/6e4),f=Math.floor(i/36e5),x=Math.floor(i/864e5);return n<1?"Just now":n<60?`${n}m ago`:f<24?`${f}h ago`:x<7?`${x}d ago`:l.toLocaleDateString()};return j&&a.length===0?e.jsx("div",{className:"flex justify-center p-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"size-6 text-primary"}),e.jsx("h1",{children:"Notifications"}),r>0&&e.jsxs(A,{className:"bg-accent text-accent-foreground",children:[r," new"]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:c==="all"?"default":"outline",onClick:()=>d("all"),children:["All (",a.length,")"]}),e.jsxs(o,{variant:c==="unread"?"default":"outline",onClick:()=>d("unread"),children:["Unread (",r,")"]})]}),e.jsx(B,{children:e.jsx(Y,{className:"h-[600px]",children:m.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(V,{className:"size-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-muted-foreground",children:"No notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:c==="unread"?"You're all caught up!":"You don't have any notifications yet"})]}):e.jsx("div",{className:"divide-y",children:m.map(s=>{const l=g(s.type),u=v(s.type);return e.jsx("div",{className:`p-4 hover:bg-muted/50 transition-colors ${s.read?"":"bg-muted/30"}`,children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:`size-10 rounded-full bg-muted flex items-center justify-center flex-shrink-0 ${u}`,children:e.jsx(l,{className:"size-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-start justify-between gap-2 mb-1",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"font-semibold",children:s.title}),!s.read&&e.jsx("div",{className:"size-2 rounded-full bg-primary"})]})}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.message}),e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(q,{className:"size-3"}),b(s.created_at)]}),e.jsx("div",{className:"flex items-center gap-2",children:!s.read&&e.jsxs(o,{variant:"ghost",size:"sm",onClick:()=>N(s.id),children:[e.jsx(T,{className:"size-4 mr-1"}),"Mark read"]})})]})]})]})},s.id)})})})})]})}export{ae as NotificationCenter};
